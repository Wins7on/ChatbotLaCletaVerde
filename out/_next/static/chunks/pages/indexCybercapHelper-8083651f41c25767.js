(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[99],{9113:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/indexCybercapHelper",function(){return n(8240)}])},8240:function(e,t,n){"use strict";n.r(t);var r=n(5893),s=n(7294);class i{async fetchDescription(){try{let e=await fetch("/description.txt");if(!e.ok)throw Error("HTTP error! status: ".concat(e.status));let t=await e.text();this.description=t,console.log("Description loaded:",this.description)}catch(e){console.error("Failed to load description:",e)}}escapeString(e){return e.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/'/g,"\\'").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\t/g,"\\t")}async sendMessage(e,t){let n=this.escapeString(this.description),r=this.escapeString(e),s={contents:[{role:"user",parts:[{text:n}]},{role:"model",parts:[{text:"Je suis votre aide Cybercap et je r\xe9pond \xe0 toutes vos questions en lien avec Cybercap."}]},...t.map(e=>({...e,text:this.escapeString(e.text)})).map(e=>({role:"question"===e.type?"user":"model",parts:[{text:e.text}]})),{role:"user",parts:[{text:r}]}]};try{let e=await fetch("".concat(this.apiUrl,"?key=").concat(this.apiKey),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)}),t=await e.json();if(console.log("API response:",t),!t.candidates||!t.candidates[0]||!t.candidates[0].content)throw Error("Invalid API response structure");return t.candidates[0].content.parts.map(e=>e.text).join(" ")}catch(e){return console.error("Error:",e),"Error fetching response"}}constructor(){this.description="",this.apiKey="AIzaSyBVHf9S6j4i_w47s8bl9PO5K39dQ6bg96U",this.apiUrl="https://generativelanguage.googleapis.com/v1beta/models/gemini-1.5-flash-latest:generateContent"}}t.default=()=>{let[e,t]=(0,s.useState)(""),[n,o]=(0,s.useState)(""),[a,c]=(0,s.useState)([]),[l,d]=(0,s.useState)("300px"),[p,u]=(0,s.useState)(null);(0,s.useEffect)(()=>{let e=new i;e.fetchDescription().then(()=>{o(e.description),u(e)});let t=()=>{let e=window.innerHeight-200;d("".concat(e,"px"))};return t(),window.addEventListener("resize",t),()=>window.removeEventListener("resize",t)},[]);let h=async()=>{if(!e.trim()){console.log("Can't send an empty message.");return}if(!p){console.log("Chat app is not initialized.");return}let n=[...a,{type:"question",text:e}],r=await p.sendMessage(e,n);c([...n,{type:"response",text:r}]),t("")},x=e=>({maxWidth:"80%",padding:"10px",borderRadius:"20px",marginBottom:"10px",color:"white",backgroundColor:"question"===e?"#90caf9":"#a5d6a7",alignSelf:"question"===e?"flex-end":"flex-start",wordBreak:"break-word"});return(0,r.jsxs)("div",{style:{margin:"20px auto",width:"80%"},children:[(0,r.jsx)("h1",{children:"Aidant Cybercap"}),(0,r.jsx)("div",{style:{display:"flex",flexDirection:"column",maxHeight:l,overflowY:"auto",backgroundColor:"#f0f0f0",padding:"10px",marginBottom:"20px",borderRadius:"5px"},children:a.map((e,t)=>(0,r.jsx)("div",{style:x(e.type),children:(0,r.jsx)("p",{style:{color:"#333"},children:e.text})},t))}),(0,r.jsx)("input",{type:"text",value:e,onChange:e=>t(e.target.value),onKeyDown:e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),h())},placeholder:"Votre question",style:{width:"100%",padding:"10px",marginBottom:"10px"}}),(0,r.jsx)("button",{onClick:h,style:{width:"100%",padding:"10px",marginBottom:"10px"},children:"Envoyer"}),(0,r.jsxs)("div",{style:{display:"flex",justifyContent:"space-between"},children:[(0,r.jsx)("a",{href:"/CreateAssistant",style:{padding:"10px",backgroundColor:"#90caf9",color:"white",textDecoration:"none",borderRadius:"5px"},children:"Create New Assistant"}),(0,r.jsx)("a",{href:"/",style:{padding:"10px",backgroundColor:"#90caf9",color:"white",textDecoration:"none",borderRadius:"5px"},children:"List Assistants"})]})]})}}},function(e){e.O(0,[888,774,179],function(){return e(e.s=9113)}),_N_E=e.O()}]);